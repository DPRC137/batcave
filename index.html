<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Space Impact Clone</title>
<style>
    body { background: #000; margin: 0; display: flex; height: 100vh; align-items: center; justify-content: center; }
    canvas { background: #000; image-rendering: pixelated; }
</style>
</head>
<body>
<canvas id="game" width="240" height="320"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const W = canvas.width;
const H = canvas.height;

// Player state
const player = { x: 20, y: H/2 - 10, w: 16, h: 16, color: '#0f0' };
const bullets = [];
const enemies = [];
let keys = {};
let lastEnemy = 0;

// Controls
window.addEventListener('keydown', e => { keys[e.code] = true; });
window.addEventListener('keyup', e => { keys[e.code] = false; });

function spawnEnemy() {
    const size = 16;
    const y = Math.random() * (H - size);
    enemies.push({ x: W, y, w: size, h: size, color: '#f00' });
}

function drawShip(ship) {
    ctx.fillStyle = ship.color;
    ctx.fillRect(ship.x, ship.y, ship.w, ship.h);
    // simple wing accents
    ctx.fillStyle = '#ff0';
    ctx.fillRect(ship.x, ship.y + ship.h/2 - 2, ship.w, 4);
}

function gameLoop(timestamp) {
    ctx.clearRect(0,0,W,H);

    // Move player
    if(keys['ArrowUp']) player.y -= 2;
    if(keys['ArrowDown']) player.y += 2;
    if(keys['ArrowLeft']) player.x -= 2;
    if(keys['ArrowRight']) player.x += 2;
    player.y = Math.max(0, Math.min(H - player.h, player.y));
    player.x = Math.max(0, Math.min(W - player.w, player.x));

    if(keys['Space']) {
        if(!player.shootCooldown) {
            bullets.push({ x: player.x + player.w, y: player.y + player.h/2 - 2, w: 4, h: 4, color: '#0ff' });
            player.shootCooldown = 10;
        }
    }
    if(player.shootCooldown) player.shootCooldown--;

    // Spawn enemies periodically
    if(timestamp - lastEnemy > 1000) {
        spawnEnemy();
        lastEnemy = timestamp;
    }

    // Update bullets
    for(let i=bullets.length-1;i>=0;i--) {
        const b = bullets[i];
        b.x += 4;
        if(b.x > W) bullets.splice(i,1);
    }

    // Update enemies
    for(let i=enemies.length-1;i>=0;i--) {
        const e = enemies[i];
        e.x -= 2;
        if(e.x + e.w < 0) enemies.splice(i,1);
    }

    // Collision detection
    for(let i=enemies.length-1;i>=0;i--) {
        const e = enemies[i];
        for(let j=bullets.length-1;j>=0;j--) {
            const b = bullets[j];
            if(b.x < e.x + e.w && b.x + b.w > e.x && b.y < e.y + e.h && b.y + b.h > e.y) {
                enemies.splice(i,1);
                bullets.splice(j,1);
                break;
            }
        }
    }

    // Draw everything
    drawShip(player);
    bullets.forEach(b => { ctx.fillStyle = b.color; ctx.fillRect(b.x, b.y, b.w, b.h); });
    enemies.forEach(drawShip);

    requestAnimationFrame(gameLoop);
}
requestAnimationFrame(gameLoop);
</script>
</body>
</html>
